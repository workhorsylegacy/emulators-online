<!DOCTYPE html>
<html>
	<head>
		<title>Emu Archive</title>
		<script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
		<script src="emu_archive.js"></script>
		<link type="text/css" href="default.css" media="screen" rel="Stylesheet" />
	</head>
	<body>
		<div id="not_connected" style="display: none">
			Not connected to server!
		</div>

		Search: <input id="search_text" type="text" />

		<div id="game_dialogs"></div>

		<div id="game_selector" style="overflow: auto;"></div>

		<br style="clear: both"/>

		<div id="output"></div>
		
		<footer>
		  <p>Copyright &copy; 2015 Matthew Brennan Jones</p>
		  <p><a href="https://github.com/workhorsy/emu_archive">https://github.com/workhorsy/emu_archive</a></p>
		</footer>
	</body>
	<script>
jQuery(function($) {

if(!("WebSocket" in window)) {
	alert("Your browser does not support web sockets");
} else {
	setup_websocket();

	// Load the game databases
	$.when(
		$.getJSON("db/saturn.json", function (data) {
			db['Saturn'] = data;
		}),
		$.getJSON("db/playstation.json", function (data) {
			db['Playstation'] = data;
		}),
		$.getJSON("db/playstation2.json", function (data) {
			db['Playstation2'] = data;
		}),
		$.getJSON("db/gamecube.json", function (data) {
			db['GameCube'] = data;
		}),
		$.getJSON("db/nintendo64.json", function (data) {
			db['Nintendo64'] = data;
		}),
		$.getJSON("db/dreamcast.json", function (data) {
			db['Dreamcast'] = data;
		})
	).then(function() {
		$('#search_text').on('input propertychange paste', on_search);

		// Show the default search
		on_search();
	});
}

});
	</script>
</html>
